# BookingBridge Staging Environment Configuration Template
# Copy this file to .env.staging and fill in the actual values

# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
ENVIRONMENT=staging
DEBUG=true
LOG_LEVEL=DEBUG

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL Database URL
DATABASE_URL=postgresql://bookingbridge_staging:YOUR_STAGING_PASSWORD@db:5432/bookingbridge_staging

# Database Connection Pool Settings (smaller for staging)
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=15
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO=true

# Database Credentials (for Docker Compose)
POSTGRES_DB=bookingbridge_staging
POSTGRES_USER=bookingbridge_staging
POSTGRES_PASSWORD=YOUR_STAGING_DATABASE_PASSWORD

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Redis URL for caching and Celery
REDIS_URL=redis://:YOUR_STAGING_REDIS_PASSWORD@redis:6379/0
REDIS_PASSWORD=YOUR_STAGING_REDIS_PASSWORD
REDIS_DB=0
REDIS_MAX_CONNECTIONS=25

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Secret key for application (different from production)
SECRET_KEY=YOUR_STAGING_SECRET_KEY_DIFFERENT_FROM_PRODUCTION

# JWT Configuration (same as production)
JWT_ALGORITHM=RS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# JWT RSA Keys (can be same as production or different)
JWT_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nYOUR_STAGING_PRIVATE_KEY_CONTENT_HERE\n-----END RSA PRIVATE KEY-----"
JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nYOUR_STAGING_PUBLIC_KEY_CONTENT_HERE\n-----END PUBLIC KEY-----"

# Privacy Protection (different salt from production)
HASH_SALT=YOUR_STAGING_HASH_SALT_DIFFERENT_FROM_PRODUCTION
ENCRYPTION_KEY=YOUR_STAGING_ENCRYPTION_KEY_DIFFERENT_FROM_PRODUCTION

# Password Security (relaxed for testing)
PASSWORD_MIN_LENGTH=6
PASSWORD_REQUIRE_UPPERCASE=false
PASSWORD_REQUIRE_LOWERCASE=false
PASSWORD_REQUIRE_NUMBERS=false
PASSWORD_REQUIRE_SYMBOLS=false

# Account Security (relaxed for testing)
ACCOUNT_LOCKOUT_THRESHOLD=10
ACCOUNT_LOCKOUT_DURATION_MINUTES=5
MAX_LOGIN_ATTEMPTS_PER_IP=50

# =============================================================================
# CORS AND DOMAIN CONFIGURATION
# =============================================================================
# Frontend URLs (staging domains)
CORS_ORIGINS=https://staging.bookingbridge.com,http://localhost:3000,http://localhost:3001

# Domain configuration
DOMAIN=staging.bookingbridge.com
FRONTEND_URL=https://staging.bookingbridge.com
BACKEND_URL=https://staging.bookingbridge.com/api

# =============================================================================
# FACEBOOK INTEGRATION (Test App)
# =============================================================================
# Facebook Test App Configuration
FACEBOOK_APP_ID=YOUR_FACEBOOK_TEST_APP_ID
FACEBOOK_APP_SECRET=YOUR_FACEBOOK_TEST_APP_SECRET

# Facebook Conversions API (Test)
FACEBOOK_CONVERSIONS_API_ACCESS_TOKEN=YOUR_TEST_FACEBOOK_CONVERSIONS_API_TOKEN
FACEBOOK_PIXEL_ID=YOUR_TEST_FACEBOOK_PIXEL_ID

# =============================================================================
# GOOGLE ADS INTEGRATION (Test Account)
# =============================================================================
# Google Ads API Test Configuration
GOOGLE_ADS_CLIENT_ID=YOUR_TEST_GOOGLE_ADS_CLIENT_ID
GOOGLE_ADS_CLIENT_SECRET=YOUR_TEST_GOOGLE_ADS_CLIENT_SECRET
GOOGLE_ADS_DEVELOPER_TOKEN=YOUR_TEST_GOOGLE_ADS_DEVELOPER_TOKEN
GOOGLE_ADS_REFRESH_TOKEN=YOUR_TEST_GOOGLE_ADS_REFRESH_TOKEN

# Google Ads Test Customer IDs
GOOGLE_ADS_CUSTOMER_IDS=YOUR_TEST_CUSTOMER_ID

# =============================================================================
# BOOKING PLATFORM INTEGRATIONS (Sandbox)
# =============================================================================
# Square API (Sandbox)
SQUARE_APPLICATION_ID=YOUR_SQUARE_SANDBOX_APPLICATION_ID
SQUARE_ACCESS_TOKEN=YOUR_SQUARE_SANDBOX_ACCESS_TOKEN
SQUARE_ENVIRONMENT=sandbox

# Test Booking Platforms
BOOKSY_API_KEY=YOUR_TEST_BOOKSY_API_KEY
BOOKSY_API_SECRET=YOUR_TEST_BOOKSY_API_SECRET

SCHEDULICITY_API_KEY=YOUR_TEST_SCHEDULICITY_API_KEY
SCHEDULICITY_API_SECRET=YOUR_TEST_SCHEDULICITY_API_SECRET

# =============================================================================
# COMMUNICATION SERVICES (Test)
# =============================================================================
# SendGrid Email Service (Test)
SENDGRID_API_KEY=YOUR_TEST_SENDGRID_API_KEY
SENDGRID_FROM_EMAIL=staging@bookingbridge.com
SENDGRID_FROM_NAME=BookingBridge Staging

# Twilio SMS/Phone Service (Test)
TWILIO_ACCOUNT_SID=YOUR_TEST_TWILIO_ACCOUNT_SID
TWILIO_AUTH_TOKEN=YOUR_TEST_TWILIO_AUTH_TOKEN
TWILIO_PHONE_NUMBER=YOUR_TEST_TWILIO_PHONE_NUMBER

# =============================================================================
# ATTRIBUTION CONFIGURATION (Same as production)
# =============================================================================
ATTRIBUTION_WINDOW_DAYS=30
MAX_ATTRIBUTION_CONFIDENCE=100
MIN_ATTRIBUTION_CONFIDENCE=50
DEFAULT_ATTRIBUTION_MODEL=last_touch
AVAILABLE_ATTRIBUTION_MODELS=first_touch,last_touch,linear,time_decay

# =============================================================================
# CELERY CONFIGURATION
# =============================================================================
# Celery Broker (Redis)
CELERY_BROKER_URL=redis://:YOUR_STAGING_REDIS_PASSWORD@redis:6379/1
CELERY_RESULT_BACKEND=redis://:YOUR_STAGING_REDIS_PASSWORD@redis:6379/2

# Celery Worker Settings (smaller for staging)
CELERY_WORKER_CONCURRENCY=2
CELERY_WORKER_MAX_TASKS_PER_CHILD=500
CELERY_WORKER_MAX_MEMORY_PER_CHILD=100000

# Celery Task Settings
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true

# =============================================================================
# RATE LIMITING (Relaxed for testing)
# =============================================================================
RATE_LIMIT_REQUESTS_PER_MINUTE=200
RATE_LIMIT_BURST=50
RATE_LIMIT_AUTH_REQUESTS_PER_MINUTE=20

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================
# Sentry Error Monitoring (Staging)
SENTRY_DSN=YOUR_STAGING_SENTRY_DSN
SENTRY_ENVIRONMENT=staging
SENTRY_RELEASE=staging

# Logging Configuration
LOG_FORMAT=json
LOG_FILE=/app/logs/staging.log
LOG_MAX_SIZE=50MB
LOG_BACKUP_COUNT=5

# Metrics
ENABLE_METRICS=true
METRICS_PORT=8001

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
# Next.js Configuration
NODE_ENV=development
NEXT_TELEMETRY_DISABLED=1

# Public API URL (visible to frontend)
NEXT_PUBLIC_API_URL=https://staging.bookingbridge.com/api

# Analytics (Test IDs)
NEXT_PUBLIC_GOOGLE_ANALYTICS_ID=YOUR_TEST_GA_ID
NEXT_PUBLIC_FACEBOOK_PIXEL_ID=YOUR_TEST_FACEBOOK_PIXEL_ID

# =============================================================================
# DOCKER AND BUILD CONFIGURATION
# =============================================================================
BUILD_DATE=2024-01-01T00:00:00Z
VERSION=staging
VCS_REF=staging

DOCKER_REGISTRY=your-registry.com
DOCKER_IMAGE_TAG=staging

# =============================================================================
# BACKUP AND MAINTENANCE (Disabled for staging)
# =============================================================================
BACKUP_SCHEDULE=0 4 * * 0  # Weekly on Sunday at 4 AM
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=bookingbridge-staging-backups
BACKUP_S3_REGION=us-east-1

# AWS Configuration (for backups)
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY
AWS_REGION=us-east-1

# =============================================================================
# HEALTH CHECKS AND MONITORING
# =============================================================================
HEALTH_CHECK_TIMEOUT=30
HEALTH_CHECK_INTERVAL=60

# External Service Health Checks (relaxed)
CHECK_FACEBOOK_API=false
CHECK_GOOGLE_ADS_API=false
CHECK_SQUARE_API=false

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
HTTP_TIMEOUT=30
DATABASE_TIMEOUT=30
REDIS_TIMEOUT=5

CACHE_TTL_SECONDS=60
CACHE_MAX_SIZE=500

# =============================================================================
# DEVELOPMENT AND DEBUGGING (Enabled for staging)
# =============================================================================
DEBUG_SQL=true
DEBUG_REDIS=true
DEBUG_CELERY=true
VERBOSE_LOGGING=true

# Test Data Configuration
ENABLE_TEST_DATA=true
CREATE_SAMPLE_BUSINESSES=true
CREATE_SAMPLE_CAMPAIGNS=true

# =============================================================================
# KUBERNETES SPECIFIC
# =============================================================================
KUBERNETES_NAMESPACE=bookingbridge-staging
SERVICE_NAME=bookingbridge-backend-staging
POD_NAME=${HOSTNAME}

MAX_WORKERS=2
WORKER_MEMORY_LIMIT=1024MB
WORKER_CPU_LIMIT=500m

# =============================================================================
# STAGING SPECIFIC FEATURES
# =============================================================================
# Feature Flags for Testing
ENABLE_NEW_ATTRIBUTION_ALGORITHM=true
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_BETA_FEATURES=true

# Testing Configuration
SKIP_EMAIL_VERIFICATION=true
ALLOW_WEAK_PASSWORDS=true
ENABLE_DEBUG_ENDPOINTS=true

# Demo Mode
DEMO_MODE=true
DEMO_BUSINESS_ID=demo-business-123